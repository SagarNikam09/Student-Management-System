{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { fetchCourses, searchCourses, getCoursesFromMockAPI } from '../services/api';\n\n// Custom hook to manage courses data\n// Demonstrates: custom hooks, async/await, error handling, loading states, memoization\nexport const useCourses = () => {\n  _s();\n  const [courses, setCourses] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [lastFetchTime, setLastFetchTime] = useState(null);\n\n  // Memoized filtered courses to prevent unnecessary recalculations\n  const filteredCourses = useMemo(() => {\n    if (!searchQuery) return courses;\n    return courses.filter(course => course.name.toLowerCase().includes(searchQuery.toLowerCase()));\n  }, [courses, searchQuery]);\n\n  // Memoized course statistics (simplified for new API structure)\n  const courseStats = useMemo(() => {\n    const total = courses.length;\n\n    // Group by course name length for demonstration\n    const byLength = courses.reduce((acc, course) => {\n      const length = course.name.length;\n      const category = length <= 10 ? 'Short' : length <= 15 ? 'Medium' : 'Long';\n      acc[category] = (acc[category] || 0) + 1;\n      return acc;\n    }, {});\n    return {\n      total,\n      byLength,\n      averageNameLength: courses.length > 0 ? Math.round(courses.reduce((sum, course) => sum + course.name.length, 0) / courses.length) : 0\n    };\n  }, [courses]);\n\n  // Fetch all courses with error handling and loading states\n  const loadCourses = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      console.log('ðŸ”„ Fetching courses...'); // Demonstrates console logging for debugging\n\n      // Use the new API function that matches the specified format\n      const response = await getCoursesFromMockAPI();\n\n      // The API now returns a direct array, so we handle it accordingly\n      if (Array.isArray(response)) {\n        setCourses(response);\n        setLastFetchTime(new Date().toISOString());\n        console.log(`âœ… Loaded ${response.length} courses successfully`);\n      } else {\n        throw new Error('Invalid response format from API');\n      }\n    } catch (err) {\n      console.error('âŒ Error fetching courses:', err);\n      setError(err.message);\n\n      // Retry logic with exponential backoff (demonstrates advanced error handling)\n      if (err.message.includes('temporarily unavailable')) {\n        console.log('ðŸ”„ Retrying in 2 seconds...');\n        setTimeout(() => {\n          loadCourses();\n        }, 2000);\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Search courses with debouncing (demonstrates performance optimization)\n  const searchCoursesDebounced = useCallback(async query => {\n    if (!query.trim()) {\n      setSearchQuery('');\n      return;\n    }\n    setSearchQuery(query);\n    setLoading(true);\n    try {\n      const response = await searchCourses(query);\n      if (response.success) {\n        setCourses(response.data);\n        console.log(`ðŸ” Found ${response.data.length} courses for \"${query}\"`);\n      }\n    } catch (err) {\n      console.error('âŒ Search error:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Get course by ID (demonstrates utility functions)\n  const getCourseById = useCallback(id => {\n    return courses.find(course => course.id === parseInt(id));\n  }, [courses]);\n\n  // Get course by name\n  const getCourseByName = useCallback(name => {\n    return courses.find(course => course.name === name);\n  }, [courses]);\n\n  // Get courses with names containing a specific word\n  const getCoursesByKeyword = useCallback(keyword => {\n    return courses.filter(course => course.name.toLowerCase().includes(keyword.toLowerCase()));\n  }, [courses]);\n\n  // Refresh courses (demonstrates manual refresh functionality)\n  const refreshCourses = useCallback(() => {\n    console.log('ðŸ”„ Manual refresh triggered');\n    loadCourses();\n  }, [loadCourses]);\n\n  // Load courses on mount\n  useEffect(() => {\n    loadCourses();\n  }, [loadCourses]);\n\n  // Auto-refresh courses every 5 minutes (demonstrates setInterval and cleanup)\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      console.log('ðŸ”„ Auto-refreshing courses...');\n      loadCourses();\n    }, 5 * 60 * 1000); // 5 minutes\n\n    // Cleanup function to prevent memory leaks\n    return () => {\n      console.log('ðŸ§¹ Cleaning up auto-refresh interval');\n      clearInterval(intervalId);\n    };\n  }, [loadCourses]);\n\n  // Return memoized object to prevent unnecessary re-renders\n  return {\n    // State\n    courses: filteredCourses,\n    allCourses: courses,\n    loading,\n    error,\n    searchQuery,\n    lastFetchTime,\n    // Computed values\n    courseStats,\n    // Actions\n    loadCourses,\n    searchCourses: searchCoursesDebounced,\n    getCourseById,\n    getCourseByName,\n    getCoursesByKeyword,\n    refreshCourses,\n    // Utility functions\n    clearError: () => setError(null),\n    clearSearch: () => setSearchQuery('')\n  };\n};\n_s(useCourses, \"wE+XLOosLdrBUB2VTM3Edvi6VBw=\");","map":{"version":3,"names":["useState","useEffect","useCallback","useMemo","fetchCourses","searchCourses","getCoursesFromMockAPI","useCourses","_s","courses","setCourses","loading","setLoading","error","setError","searchQuery","setSearchQuery","lastFetchTime","setLastFetchTime","filteredCourses","filter","course","name","toLowerCase","includes","courseStats","total","length","byLength","reduce","acc","category","averageNameLength","Math","round","sum","loadCourses","console","log","response","Array","isArray","Date","toISOString","Error","err","message","setTimeout","searchCoursesDebounced","query","trim","success","data","getCourseById","id","find","parseInt","getCourseByName","getCoursesByKeyword","keyword","refreshCourses","intervalId","setInterval","clearInterval","allCourses","clearError","clearSearch"],"sources":["C:/Users/Sagar Nikam/Desktop/NavG_task/src/hooks/useCourses.js"],"sourcesContent":["import { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { fetchCourses, searchCourses, getCoursesFromMockAPI } from '../services/api';\r\n\r\n// Custom hook to manage courses data\r\n// Demonstrates: custom hooks, async/await, error handling, loading states, memoization\r\nexport const useCourses = () => {\r\n  const [courses, setCourses] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [lastFetchTime, setLastFetchTime] = useState(null);\r\n\r\n  // Memoized filtered courses to prevent unnecessary recalculations\r\n  const filteredCourses = useMemo(() => {\r\n    if (!searchQuery) return courses;\r\n    \r\n    return courses.filter(course =>\r\n      course.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n  }, [courses, searchQuery]);\r\n\r\n  // Memoized course statistics (simplified for new API structure)\r\n  const courseStats = useMemo(() => {\r\n    const total = courses.length;\r\n    \r\n    // Group by course name length for demonstration\r\n    const byLength = courses.reduce((acc, course) => {\r\n      const length = course.name.length;\r\n      const category = length <= 10 ? 'Short' : length <= 15 ? 'Medium' : 'Long';\r\n      acc[category] = (acc[category] || 0) + 1;\r\n      return acc;\r\n    }, {});\r\n\r\n    return {\r\n      total,\r\n      byLength,\r\n      averageNameLength: courses.length > 0 \r\n        ? Math.round(courses.reduce((sum, course) => sum + course.name.length, 0) / courses.length)\r\n        : 0\r\n    };\r\n  }, [courses]);\r\n\r\n  // Fetch all courses with error handling and loading states\r\n  const loadCourses = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      console.log('ðŸ”„ Fetching courses...'); // Demonstrates console logging for debugging\r\n      \r\n      // Use the new API function that matches the specified format\r\n      const response = await getCoursesFromMockAPI();\r\n      \r\n      // The API now returns a direct array, so we handle it accordingly\r\n      if (Array.isArray(response)) {\r\n        setCourses(response);\r\n        setLastFetchTime(new Date().toISOString());\r\n        console.log(`âœ… Loaded ${response.length} courses successfully`);\r\n      } else {\r\n        throw new Error('Invalid response format from API');\r\n      }\r\n      \r\n    } catch (err) {\r\n      console.error('âŒ Error fetching courses:', err);\r\n      setError(err.message);\r\n      \r\n      // Retry logic with exponential backoff (demonstrates advanced error handling)\r\n      if (err.message.includes('temporarily unavailable')) {\r\n        console.log('ðŸ”„ Retrying in 2 seconds...');\r\n        setTimeout(() => {\r\n          loadCourses();\r\n        }, 2000);\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Search courses with debouncing (demonstrates performance optimization)\r\n  const searchCoursesDebounced = useCallback(async (query) => {\r\n    if (!query.trim()) {\r\n      setSearchQuery('');\r\n      return;\r\n    }\r\n\r\n    setSearchQuery(query);\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const response = await searchCourses(query);\r\n      \r\n      if (response.success) {\r\n        setCourses(response.data);\r\n        console.log(`ðŸ” Found ${response.data.length} courses for \"${query}\"`);\r\n      }\r\n      \r\n    } catch (err) {\r\n      console.error('âŒ Search error:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Get course by ID (demonstrates utility functions)\r\n  const getCourseById = useCallback((id) => {\r\n    return courses.find(course => course.id === parseInt(id));\r\n  }, [courses]);\r\n\r\n  // Get course by name\r\n  const getCourseByName = useCallback((name) => {\r\n    return courses.find(course => course.name === name);\r\n  }, [courses]);\r\n\r\n  // Get courses with names containing a specific word\r\n  const getCoursesByKeyword = useCallback((keyword) => {\r\n    return courses.filter(course => \r\n      course.name.toLowerCase().includes(keyword.toLowerCase())\r\n    );\r\n  }, [courses]);\r\n\r\n  // Refresh courses (demonstrates manual refresh functionality)\r\n  const refreshCourses = useCallback(() => {\r\n    console.log('ðŸ”„ Manual refresh triggered');\r\n    loadCourses();\r\n  }, [loadCourses]);\r\n\r\n  // Load courses on mount\r\n  useEffect(() => {\r\n    loadCourses();\r\n  }, [loadCourses]);\r\n\r\n  // Auto-refresh courses every 5 minutes (demonstrates setInterval and cleanup)\r\n  useEffect(() => {\r\n    const intervalId = setInterval(() => {\r\n      console.log('ðŸ”„ Auto-refreshing courses...');\r\n      loadCourses();\r\n    }, 5 * 60 * 1000); // 5 minutes\r\n\r\n    // Cleanup function to prevent memory leaks\r\n    return () => {\r\n      console.log('ðŸ§¹ Cleaning up auto-refresh interval');\r\n      clearInterval(intervalId);\r\n    };\r\n  }, [loadCourses]);\r\n\r\n  // Return memoized object to prevent unnecessary re-renders\r\n  return {\r\n    // State\r\n    courses: filteredCourses,\r\n    allCourses: courses,\r\n    loading,\r\n    error,\r\n    searchQuery,\r\n    lastFetchTime,\r\n    \r\n    // Computed values\r\n    courseStats,\r\n    \r\n    // Actions\r\n    loadCourses,\r\n    searchCourses: searchCoursesDebounced,\r\n    getCourseById,\r\n    getCourseByName,\r\n    getCoursesByKeyword,\r\n    refreshCourses,\r\n    \r\n    // Utility functions\r\n    clearError: () => setError(null),\r\n    clearSearch: () => setSearchQuery('')\r\n  };\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}